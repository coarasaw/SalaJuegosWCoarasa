"use strict";(self.webpackChunksala_juegos=self.webpackChunksala_juegos||[]).push([[23],{2023:(_,g,o)=>{o.r(g),o.d(g,{ChatModule:()=>j});var c=o(8583),m=o(9895),d=o(189);class l{constructor(s,t,i){this.remitente=s,this.mensaje=t,this.diaHora=i}}var e=o(7716),h=o(2825);let p=(()=>{class n{constructor(t){this.afs=t,this.mensajesCollection=t.collection("mensajes"),this.items=this.mensajesCollection.valueChanges()}nuevoMensaje(t){return this.mensajesCollection.add(Object.assign({},t))}traerMensajes(){return this.mensajesCollection=this.afs.collection("mensajes",t=>t.orderBy("diaHora","asc")),this.mensajesCollection.valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(h.ST))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var u=o(8091),a=o(3679);function v(n,s){if(1&n&&(e.TgZ(0,"div",12),e.TgZ(1,"div"),e._UZ(2,"img",13),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"p",1),e._uU(6),e.qZA(),e._UZ(7,"hr"),e.qZA()),2&n){const t=s.$implicit;e.xp6(4),e.AsE(" ",t.remitente," | ",t.diaHora," "),e.xp6(2),e.Oqu(t.mensaje)}}const C=[{path:"",component:(()=>{class n{constructor(t,i){this.msjSrv=t,this.authSrv=i,this.remitente="",this.destinatario="",this.fecha="",this.hora="",this.mensaje="",this.mensajeEnviar="",this.mensajes=[]}ngOnInit(){this.mostrarRecientes()}mostrarRecientes(){this.msjSrv.traerMensajes().subscribe(t=>{this.mensajes=t,this.mensajes.sort(),console.log(t)})}mandarMensaje(){try{let t=this.authSrv.getCurrentUserLS().email;if(""!=this.mensajeEnviar&&null!=this.mensajeEnviar&&this.mensajeEnviar){let i=new l(t,this.mensajeEnviar,this.horario());this.msjSrv.nuevoMensaje(i).then(r=>{this.mensajeEnviar=""}).catch(r=>{console.log(r)})}}catch(t){console.log(t)}}horario(){let t=new Date;return t.getDate().toString()+"-"+t.getMonth().toString()+"-"+t.getFullYear().toString()+" "+t.getHours().toString()+":"+t.getMinutes().toString()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p),e.Y36(u.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-chat"]],decls:12,vars:2,consts:[[1,"container"],[1,"messaging"],[1,"mesgs"],[1,"msg_history"],[1,"incoming_msg"],[1,"received_msg"],["class","received_withd_msg",4,"ngFor","ngForOf"],[1,"type_msg"],[1,"input_msg_write"],["type","text","placeholder","Escribir un mensaje...",1,"write_msg",3,"ngModel","ngModelChange"],["type","button",1,"msg_send_btn",3,"click"],["src","./../../../assets/enviar.png"],[1,"received_withd_msg"],["width","20px","src","https://ptetutorials.com/images/user-profile.png"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.YNc(6,v,8,3,"div",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",7),e.TgZ(8,"div",8),e.TgZ(9,"input",9),e.NdJ("ngModelChange",function(M){return i.mensajeEnviar=M}),e.qZA(),e.TgZ(10,"button",10),e.NdJ("click",function(){return i.mandarMensaje()}),e._UZ(11,"img",11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("ngForOf",i.mensajes),e.xp6(3),e.Q6J("ngModel",i.mensajeEnviar))},directives:[c.sg,a.Fj,a.JJ,a.On],styles:[".container[_ngcontent-%COMP%]{max-width:1170px;margin:auto}img[_ngcontent-%COMP%]{max-width:100%}.incoming_msg_img[_ngcontent-%COMP%]{display:inline-block;width:6%}.received_msg[_ngcontent-%COMP%]{display:inline-block;padding:0 0 0 10px;vertical-align:top;width:92%}.received_withd_msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{border-radius:3px;font-size:14px;margin:0;padding:5px 10px 5px 12px;width:100%}.time_date[_ngcontent-%COMP%]{display:block;font-size:12px;margin:8px 0 0}.received_withd_msg[_ngcontent-%COMP%]{width:57%}.mesgs[_ngcontent-%COMP%]{float:left;padding:30px 15px 0 25px;width:60%}.sent_msg[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#05728f none repeat scroll 0 0;border-radius:3px;font-size:14px;margin:0;color:#fff;padding:5px 10px 5px 12px;width:100%}.outgoing_msg[_ngcontent-%COMP%]{overflow:hidden;margin:26px 0}.sent_msg[_ngcontent-%COMP%]{float:right;width:46%}.input_msg_write[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:medium none;font-size:15px;min-height:48px;width:100%}.type_msg[_ngcontent-%COMP%]{border-top:1px solid #c4c4c4;position:relative}.msg_send_btn[_ngcontent-%COMP%]{border:medium none;border-radius:50%;cursor:pointer;font-size:17px;height:33px;position:absolute;right:0;top:11px;width:33px}.messaging[_ngcontent-%COMP%]{padding:0 0 50px;background:#232324;color:#fff}.msg_history[_ngcontent-%COMP%]{height:400px;overflow-y:auto;background:#232324;color:#fff}"]}),n})(),canActivate:[d.U]}];let f=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.Bz.forChild(C)],m.Bz]}),n})(),j=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[c.ez,f,a.u5]]}),n})()}}]);